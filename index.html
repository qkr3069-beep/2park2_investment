<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì´ë°•ì´ ì¸ë² ìŠ¤íŠ¸ë¨¼íŠ¸ ë‰´ìŠ¤ ë¸Œë¦¬í•‘</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css" />
  <style>
    :root{
      --brand-primary:#0f3a3a;        /* ë”¥ í‹¸ ë©”ì¸ ì»¬ëŸ¬ */
      --brand-primary-700:#0a2b2b;    /* hoverìš© ì–´ë‘ìš´ ë”¥ í‹¸ */
      --brand-primary-50:#f7f4ef;     /* ì „ì²´ ë°°ê²½ (ì•„ì´ë³´ë¦¬/í¬ë¦¼ìƒ‰) */

      --brand-text:#0f3a3a;           /* ê¸°ë³¸ í…ìŠ¤íŠ¸ */
      --brand-muted:#4b5e5e;          /* ë³´ì¡° í…ìŠ¤íŠ¸ */

      --brand-card:#ffffff;           /* ì¹´ë“œ ë°°ê²½ */
      --brand-divider:#e5e1d8;        /* ì¹´ë“œ êµ¬ë¶„ì„  */

      --brand-radius:14px;
      --brand-shadow:0 6px 18px rgba(0,0,0,0.08);
    }
    html,body{
      font-family:"Pretendard Variable",Pretendard,sans-serif;
    }
    .brand-header{
      background:#F7F3ED; /* ì•„ì´ë³´ë¦¬ ë°°ê²½ */
    }
    .brand-btn{
      background:var(--brand-primary);
      color:#f9fafb;
      padding:10px 18px;
      border-radius:9999px;
      font-weight:700;
    }
    .brand-section-title{
      font-weight:800;
      border-left:6px solid var(--brand-primary);
      padding-left:10px;
    }
    .brand-card{
      background:var(--brand-card);
      border-radius:var(--brand-radius);
      box-shadow:var(--brand-shadow);
      border:1px solid #111827;
    }
    .brand-link{
      color:#22c55e;                 /* ë§í¬ í…ìŠ¤íŠ¸: ì—°ë…¹ í¬ì¸íŠ¸ */
      font-weight:700;
    }
    .badge-link{
      background:#22c55e33;          /* ì‚´ì§ íˆ¬ëª…í•œ ì—°ë…¹ ë°°ì§€ */
      padding:6px 10px;
      border-radius:9999px;
      color:#f9fafb;
    }
    .brand-divider{
      border-top:1px dashed var(--brand-divider);
    }
    input[type="date"]{
      color:black;
    }
  </style>
</head>
<body class="bg-[var(--brand-primary-50)] text-[var(--brand-text)] min-h-screen">

<!-- HEADER -->
<header class="brand-header text-white">
  <div class="max-w-6xl mx-auto px-5 py-5 flex flex-col gap-4">

    <!-- ìƒë‹¨ ë¡œê³  + íƒ€ì´í‹€ + ë‚ ì§œ -->
    <div class="flex flex-col lg:flex-row lg:justify-between gap-4">
      <div class="flex flex-col items-start gap-0 text-left">
        <a href="index.html" class="block">
  <img
    src="2park2 investment_logo.png"
    alt="ì´ë°•ì´ ì¸ë² ìŠ¤íŠ¸ë¨¼íŠ¸ ë¡œê³ "
    class="
      h-24        /* ê¸°ë³¸ 96px â†’ ê¸°ì¡´ ëŒ€ë¹„ ì•½ 4ë°° í™•ëŒ€ */
      md:h-28    /* íƒœë¸”ë¦¿ì—ì„œ ë” í¬ê²Œ */
      lg:h-32    /* ë°ìŠ¤í¬íƒ‘ì—ì„œ ë” í¬ê²Œ */
      object-contain 
      cursor-pointer
    "
  />
</a>

        <div class="flex gap-3 items-center flex-wrap mt-1">
          <h1 class="text-xl lg:text-2xl font-extrabold text-[#0A3A32]">
            ì´ë°•ì´ ì¸ë² ìŠ¤íŠ¸ë¨¼íŠ¸ ë‰´ìŠ¤ ë¸Œë¦¬í•‘
          </h1>
          <a href="https://www.korea.kr/" target="_blank" rel="noopener"
             class="badge-link text-white font-bold text-sm">
            ì •ì±…ë¸Œë¦¬í•‘ ë°”ë¡œê°€ê¸°
          </a>
        </div>
      </div>

      <div class="flex items-center gap-3">
        <input type="date" id="datePicker"
               class="px-3 py-2 rounded-xl bg-white text-black" />
        <button onclick="loadAllNews()"
                class="brand-btn hover:bg-[var(--brand-primary-700)] transition">
          ì¡°íšŒ
        </button>
      </div>
    </div>

    <!-- ğŸ”— ë§¤ë‹ˆì € ê°œë³„ í˜ì´ì§€ ì´ë™ ë²„íŠ¼ -->
    <div class="flex flex-wrap gap-3 mt-1">
      <!-- íŒŒì¼ ì´ë¦„ì€ ì‹¤ì œ ë§Œë“  í˜ì´ì§€ì— ë§ê²Œ ìˆ˜ì •í•´ì„œ ì‚¬ìš© -->
      <a href="sun_manager.html"
         class="px-4 py-2 rounded-full bg-white text-[var(--brand-primary)]
                font-semibold text-sm shadow hover:bg-[#e6f3f1] transition">
        ì„  ë§¤ë‹ˆì € í˜ì´ì§€ â†’
      </a>
      <a href="hong_manager.html"
         class="px-4 py-2 rounded-full bg-white text-[var(--brand-primary)]
                font-semibold text-sm shadow hover:bg-[#e6f3f1] transition">
        í™ ë§¤ë‹ˆì € í˜ì´ì§€ â†’
      </a>
      <a href="dong_manager.html"
         class="px-4 py-2 rounded-full bg-white text-[var(--brand-primary)]
                font-semibold text-sm shadow hover:bg-[#e6f3f1] transition">
        ë™ ë§¤ë‹ˆì € í˜ì´ì§€ â†’
      </a>
    </div>

  </div>
</header>

<main class="max-w-6xl mx-auto px-5 py-4 space-y-6">

  <!-- ğŸ“Š ì£¼ìš” ì‹œì¥ ì°¨íŠ¸ -->
  <section id="market-charts" class="space-y-4 mb-4">
    <h2 class="brand-section-title text-xl">ì£¼ìš” ì‹œì¥ ì°¨íŠ¸</h2>

    <div class="grid md:grid-cols-3 gap-4">
      <!-- ë‹¬ëŸ¬/ì› -->
      <div class="brand-card p-3">
        <h3 class="font-bold mb-2 text-sm text-[var(--brand-muted)]">
          ë‹¬ëŸ¬/ì› í™˜ìœ¨ (USD/KRW)
        </h3>
        <iframe
          src="https://s.tradingview.com/widgetembed/?symbol=FX_IDC%3AUSDKRW&interval=D&theme=light&style=1&locale=kr&toolbarbg=f1f3f6&hidetoptoolbar=1&hidesidetoolbar=1&hidelegend=1"
          style="width:100%;height:260px;"
          frameborder="0"
          allowtransparency="true"
          scrolling="no">
        </iframe>
      </div>

      <!-- ê¸ˆ ì‹œì„¸ -->
      <div class="brand-card p-3">
        <h3 class="font-bold mb-2 text-sm text-[var(--brand-muted)]">
          ê¸ˆ ì‹œì„¸ (XAU/USD)
        </h3>
        <iframe
          src="https://s.tradingview.com/widgetembed/?symbol=FX_IDC%3AXAUUSD&interval=D&theme=light&style=1&locale=kr&toolbarbg=f1f3f6&hidetoptoolbar=1&hidesidetoolbar=1&hidelegend=1"
          style="width:100%;height:260px;"
          frameborder="0"
          allowtransparency="true"
          scrolling="no">
        </iframe>
      </div>

      <!-- WTI ì›ìœ  -->
      <div class="brand-card p-3">
        <h3 class="font-bold mb-2 text-sm text-[var(--brand-muted)]">
          WTI ì›ìœ  (Crude Oil)
        </h3>
        <iframe
          src="https://s.tradingview.com/widgetembed/?symbol=TVC%3AUSOIL&interval=D&theme=light&style=1&locale=kr&toolbarbg=f1f3f6&hidetoptoolbar=1&hidesidetoolbar=1&hidelegend=1"
          style="width:100%;height:260px;"
          frameborder="0"
          allowtransparency="true"
          scrolling="no">
        </iframe>
      </div>
    </div>

    <div class="brand-divider mt-4"></div>
  </section>

  <!-- ğŸ“° ë‰´ìŠ¤ ì˜ì—­ -->
  <section class="space-y-4">
    <div id="news-container" class="space-y-6"></div>
  </section>

</main>

<script>
/* ğŸ”¥ í”¼ë“œ: êµ­ë‚´/êµ­ì™¸ 'ê²½ì œ' ì¤‘ì‹¬ìœ¼ë¡œë§Œ 2ê°œ */
const feeds = {
  "ì£¼ìš” ê²½ì œ ë‰´ìŠ¤(êµ­ë‚´)":
    "https://news.google.com/rss/search?q=" +
    encodeURIComponent("ì¦ì‹œ OR ë¬¼ê°€ OR ê¸ˆë¦¬ OR í™˜ìœ¨ OR ê²½ê¸° OR ê²½ì œ") +
    "&hl=ko&gl=KR&ceid=KR:ko",

  "ì£¼ìš” ê²½ì œ ë‰´ìŠ¤(êµ­ì™¸)":
    "https://news.google.com/rss/search?q=" +
    encodeURIComponent("global economy OR inflation OR interest rates OR stock market OR Fed") +
    "&hl=en-US&gl=US&ceid=US:en"
};

/* ë”ë³´ê¸° ë§í¬ìš© í‚¤ì›Œë“œ(ê²€ìƒ‰ í˜ì´ì§€ë¡œ ì—°ê²°) */
const CATEGORY_KEYWORDS = {
  "ì£¼ìš” ê²½ì œ ë‰´ìŠ¤(êµ­ë‚´)": ["ì¦ì‹œ","ë¬¼ê°€","ê¸ˆë¦¬","í™˜ìœ¨","ê²½ê¸°","ê²½ì œ"],
  "ì£¼ìš” ê²½ì œ ë‰´ìŠ¤(êµ­ì™¸)": ["global economy","inflation","interest rates","stock market","Fed"]
};

/* 'ë”ë³´ê¸°' í´ë¦­ ì‹œ ë³´ë‚¼ ê¸°ë³¸ URL */
const TOP_PAGE = {
  "ì£¼ìš” ê²½ì œ ë‰´ìŠ¤(êµ­ë‚´)":
    "https://news.google.com/search?q=" +
    encodeURIComponent("ì¦ì‹œ OR ë¬¼ê°€ OR ê¸ˆë¦¬ OR í™˜ìœ¨ OR ê²½ê¸° OR ê²½ì œ") +
    "&hl=ko&gl=KR&ceid=KR:ko",

  "ì£¼ìš” ê²½ì œ ë‰´ìŠ¤(êµ­ì™¸)":
    "https://news.google.com/search?q=" +
    encodeURIComponent("global economy OR inflation OR interest rates OR stock market OR Fed") +
    "&hl=en-US&gl=US&ceid=US:en"
};

function buildMoreLink(cat){
  if (TOP_PAGE[cat]) return TOP_PAGE[cat];
  const terms = CATEGORY_KEYWORDS[cat];
  if (!terms) return "#";
  const q = terms.map(t=>`%22${encodeURIComponent(t)}%22`).join("%20OR%20");
  return `https://news.google.com/search?q=${q}&hl=ko&gl=KR&ceid=KR%3Ako`;
}

/* ë‚ ì§œ ì²˜ë¦¬ */
function parseYMD(v){
  const [a,b,c] = v.split("-").map(Number);
  return new Date(a, b - 1, c);
}
function isSameDate(dt, sel){
  return Math.abs((new Date(dt) - parseYMD(sel)) / 86400000) <= 1;
}

/* RSS â†’ JSON */
async function fetchRSS(u){
  const r = await fetch(
    "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent(u)
  );
  return r.json();
}

/* ì„¹ì…˜ ë Œë”ë§ */
function renderSection(wrap, cat, items, selDate){
  let num = 0;
  const sec = document.createElement("section");

  sec.innerHTML = `
    <div class="flex justify-between items-center mb-2">
      <h2 class="brand-section-title text-xl">${cat}</h2>
      <a href="${buildMoreLink(cat)}" target="_blank"
         class="px-3 py-1 bg-[var(--brand-primary)] text-white rounded-md text-sm hover:bg-[var(--brand-primary-700)] transition">
        ë”ë³´ê¸°
      </a>
    </div>
  `;

  for(const it of items || []){
    if(num >= 5) break;
    if(!isSameDate(it.pubDate, selDate)) continue;

    const clean = (it.description || "").replace(/<[^>]+>/g," ").slice(0, 80);

    sec.innerHTML += `
      <div class="brand-card p-4 mt-2">
        <a class="brand-link block mb-1" href="${it.link}" target="_blank">
          ${it.title}
        </a>
        <p class="text-sm text-[var(--brand-muted)] brand-sub">
          ${clean}...
        </p>
      </div>
    `;
    num++;
  }

  if(num === 0){
    sec.innerHTML += `
      <p class="brand-sub text-[var(--brand-muted)]">
        í•´ë‹¹ ë‚ ì§œì˜ ê²½ì œ ë‰´ìŠ¤ê°€ ì—†ì–´ìš”. ë‚ ì§œë¥¼ ë°”ê¾¸ê±°ë‚˜ ë”ë³´ê¸°ë¥¼ ëˆŒëŸ¬ë³´ì„¸ìš”.
      </p>
    `;
  }

  sec.innerHTML += `<div class="brand-divider mt-4 mb-2"></div>`;
  wrap.appendChild(sec);
}

/* ì „ì²´ ë¡œë“œ */
async function loadAllNews(){
  const selDate = document.getElementById("datePicker").value;
  const c = document.getElementById("news-container");
  c.innerHTML = "";

  for(const [cat, url] of Object.entries(feeds)){
    const d = await fetchRSS(url);
    renderSection(c, cat, d.items || [], selDate);
  }
}

/* ì´ˆê¸° ë¡œë“œ */
window.onload = () => {
  document.getElementById("datePicker").value =
    new Date().toISOString().slice(0,10);
  loadAllNews();
};
</script>
</body>
</html>
