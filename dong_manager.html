<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë™ ë§¤ë‹ˆì € ë‰´ìŠ¤ ë¸Œë¦¬í•‘</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind + Pretendard -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css" />

  <style>
    :root{
      --brand-primary:#0f3a3a;
      --brand-primary-700:#0a2b2b;
      --brand-primary-50:#f7f4ef;
      --brand-text:#0f3a3a;
      --brand-muted:#4b5e5e;
      --brand-card:#ffffff;
      --brand-divider:#e5e1d8;
      --brand-radius:14px;
      --brand-shadow:0 6px 18px rgba(0,0,0,0.08);
    }
    body{
      background:var(--brand-primary-50);
      font-family:"Pretendard Variable",Pretendard,sans-serif;
    }
    .brand-header{ background:#F7F3ED; }
    .brand-card{
      background:var(--brand-card);
      border-radius:var(--brand-radius);
      box-shadow:var(--brand-shadow);
      border:1px solid #11182720;
    }
    .brand-section-title{
      font-weight:800;
      border-left:6px solid var(--brand-primary);
      padding-left:10px;
    }
    .brand-link{
      color:#22c55e;
      font-weight:700;
    }
    .brand-divider{ border-top:1px dashed var(--brand-divider); }
  </style>
</head>

<body>

<!-- HEADER -->
<header class="brand-header">
  <div class="max-w-6xl mx-auto px-5 py-5 flex flex-col md:flex-row md:justify-between gap-4">

    <div class="flex flex-col items-start">
      <a href="index.html">
  <img src="2park2 investment_logo.png"
       alt="ì´ë°•ì´ ì¸ë² ìŠ¤íŠ¸ë¨¼íŠ¸ ë¡œê³ " class="h-16 object-contain cursor-pointer" />
</a>

      <h1 class="text-xl lg:text-2xl font-extrabold text-[#0A3A32] mt-2">
        ë™ ë§¤ë‹ˆì € ë‰´ìŠ¤ ë¸Œë¦¬í•‘
      </h1>
    </div>

    <div class="flex items-center gap-3">
      <input type="date" id="datePicker"
        class="px-3 py-2 rounded-xl bg-white text-black" />
      <button onclick="loadAll()"
        class="px-4 py-2 bg-[var(--brand-primary)] text-white rounded-xl font-bold hover:bg-[var(--brand-primary-700)] transition">
        ì¡°íšŒ
      </button>
    </div>
  </div>
</header>

<!-- ğŸ”¥ ìƒë‹¨ ì¢…ëª© ì°¨íŠ¸ ì˜ì—­ (TradingView ê³µì‹ ìœ„ì ¯) -->
<!-- ğŸ”¥ ìƒë‹¨ ì¢…ëª© ì°¨íŠ¸ ì˜ì—­ -->
<section class="max-w-6xl mx-auto px-5 mt-6">
  <h2 class="text-xl font-extrabold text-[var(--brand-primary)] mb-3">
    ğŸ“ˆ ë™ ë§¤ë‹ˆì € ì£¼ìš” ì¢…ëª© ì°¨íŠ¸
  </h2>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">

    <!-- ìœ ë¹„ì¼€ì–´ -->
    <div class="brand-card p-3">
      <h3 class="font-bold mb-2 text-[var(--brand-text)]">ìœ ë¹„ì¼€ì–´ (032620)</h3>
      <a href="https://finance.naver.com/item/main.naver?code=032620" target="_blank" rel="noopener">
        <img
          src="https://ssl.pstatic.net/imgfinance/chart/item/area/day/032620.png"
          alt="ìœ ë¹„ì¼€ì–´ ì£¼ê°€ ì°¨íŠ¸"
          class="w-full"
        />
      </a>
    </div>

    <!-- SKë°”ì´ì˜¤íŒœ -->
    <div class="brand-card p-3">
      <h3 class="font-bold mb-2 text-[var(--brand-text)]">SKë°”ì´ì˜¤íŒœ (326030)</h3>
      <a href="https://finance.naver.com/item/main.naver?code=326030" target="_blank" rel="noopener">
        <img
          src="https://ssl.pstatic.net/imgfinance/chart/item/area/day/326030.png"
          alt="SKë°”ì´ì˜¤íŒœ ì£¼ê°€ ì°¨íŠ¸"
          class="w-full"
        />
      </a>
    </div>

    <!-- ëŒ€í•œì¡°ì„  -->
    <div class="brand-card p-3">
      <h3 class="font-bold mb-2 text-[var(--brand-text)]">ëŒ€í•œì¡°ì„  (439260)</h3>
      <a href="https://finance.naver.com/item/main.naver?code=439260" target="_blank" rel="noopener">
        <img
          src="https://ssl.pstatic.net/imgfinance/chart/item/area/day/439260.png"
          alt="ëŒ€í•œì¡°ì„  ì£¼ê°€ ì°¨íŠ¸"
          class="w-full"
        />
      </a>
    </div>

    <!-- íƒœì„± -->
    <div class="brand-card p-3">
      <h3 class="font-bold mb-2 text-[var(--brand-text)]">íƒœì„± (323280)</h3>
      <a href="https://finance.naver.com/item/main.naver?code=323280" target="_blank" rel="noopener">
        <img
          src="https://ssl.pstatic.net/imgfinance/chart/item/area/day/323280.png"
          alt="íƒœì„± ì£¼ê°€ ì°¨íŠ¸"
          class="w-full"
        />
      </a>
    </div>

  </div>
</section>

<main class="max-w-6xl mx-auto px-5 py-6 space-y-8">
  <div id="news-container" class="space-y-10"></div>
</main>

<script>
/* ğŸ”¥ ë™ ë§¤ë‹ˆì € í‚¤ì›Œë“œ ë¦¬ìŠ¤íŠ¸ */
const KEYWORDS = [
  "ìœ ë¹„ì¼€ì–´",
  "SKë°”ì´ì˜¤íŒœ",
  "ëŒ€í•œì¡°ì„ ",
  "íƒœì„±"
];

/* ğŸ”¥ ê° í‚¤ì›Œë“œ â†’ RSS URL ë§Œë“¤ê¸° (í•œêµ­ ë‰´ìŠ¤) */
function makeFeed(keyword){
  return (
    "https://news.google.com/rss/search?q=" +
    encodeURIComponent(`"${keyword}"`) +
    "&hl=ko&gl=KR&ceid=KR:ko"
  );
}

/* ë‚ ì§œ ì²˜ë¦¬ */
function parseYMD(v){
  const [a,b,c] = v.split("-").map(Number);
  return new Date(a, b-1, c);
}
function isSameDate(pub, selected){
  return Math.abs((new Date(pub) - parseYMD(selected)) / 86400000) <= 1;
}

/* RSS JSON ë³€í™˜ */
async function fetchRSS(url){
  const r = await fetch(
    "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent(url)
  );
  return r.json();
}

/* ğŸ”¥ ê¸°ì‚¬ ì„¹ì…˜ ë Œë” */
function renderKeywordSection(container, keyword, items, selDate){
  const sec = document.createElement("section");

  sec.innerHTML = `
    <h2 class="brand-section-title text-xl mb-3">${keyword}</h2>
  `;

  let count = 0;

  for(const it of items || []){
    if(count >= 5) break;
    if(!isSameDate(it.pubDate, selDate)) continue;

    const text = (it.description || "").replace(/<[^>]+>/g," ").slice(0,70);

    sec.innerHTML += `
      <div class="brand-card p-4 mb-3">
        <a class="brand-link block mb-1" href="${it.link}" target="_blank">
          ${it.title}
        </a>
        <p class="text-sm text-[var(--brand-muted)]">${text}...</p>
      </div>
    `;

    count++;
  }

  if(count === 0){
    sec.innerHTML += `<p class="text-[var(--brand-muted)]">í•´ë‹¹ ë‚ ì§œ ì†Œì‹ ì—†ìŒ</p>`;
  }

  sec.innerHTML += `<div class="brand-divider mt-4"></div>`;
  container.appendChild(sec);
}

/* ğŸ”¥ ì „ì²´ ë¡œë“œ */
async function loadAll(){
  const selDate = document.getElementById("datePicker").value;
  const container = document.getElementById("news-container");
  container.innerHTML = "";

  for(const keyword of KEYWORDS){
    const url = makeFeed(keyword);
    const data = await fetchRSS(url);
    const items = data.items || [];

    renderKeywordSection(container, keyword, items, selDate);
  }
}

/* í˜ì´ì§€ ë¡œë“œ ì‹œ ì˜¤ëŠ˜ ë‚ ì§œ ìë™ ì„¤ì • */
window.onload = ()=>{
  document.getElementById("datePicker").value =
    new Date().toISOString().slice(0,10);
  loadAll();
};
</script>

</body>
</html>
